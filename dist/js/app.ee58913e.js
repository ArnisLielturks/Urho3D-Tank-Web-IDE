(function(e){function t(t){for(var i,a,l=t[0],d=t[1],r=t[2],u=0,h=[];u<l.length;u++)a=l[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&h.push(o[a][0]),o[a]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(e[i]=d[i]);c&&c(t);while(h.length)h.shift()();return s.push.apply(s,r||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,l=1;l<n.length;l++){var d=n[l];0!==o[d]&&(i=!1)}i&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},o={app:0},s=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var r=0;r<l.length;r++)t(l[r]);var c=d;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1356:function(e,t,n){},"40f1":function(e,t,n){},"48f9":function(e,t,n){},"4c44":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("4160"),n("b0c0"),n("d3b7"),n("159b"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("UiToastList"),n("Loader",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]}),n("div",{staticClass:"row",attrs:{id:"top-half"}},[n("input",{staticClass:"hideBox",attrs:{type:"checkbox",id:"hideAce"}}),n("div",{staticClass:"column top-column resizable",attrs:{id:"ace"}},[n("CodeEditor")],1),n("Preview",{staticClass:"column top-column",attrs:{id:"player"}})],1),n("div",{staticClass:"row",attrs:{id:"bottom-half"}},[n("Messages",{staticClass:"column bottom-column resizable",attrs:{id:"console"}}),n("ProjectStructure",{staticClass:"column bottom-column resizable",attrs:{id:"browser"}}),n("div",{staticClass:"column bottom-column",attrs:{id:"logo"}})],1)],1)},s=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loading"},[e._v("aaaaLoadingâ€¦")])},l=[],d={name:"Loader"},r=d,c=(n("b7eb"),n("2877")),u=Object(c["a"])(r,a,l,!1,null,"e7fd4774",null),h=u.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("header",{staticClass:"toolbar"},[n("div",{staticClass:"button",attrs:{"data-toggle":"tooltip",title:"Save currently opened file!"},on:{click:function(t){return e.saveCurrentFile()}}},[e._v("Save file")]),n("div",{staticClass:"button",attrs:{"data-toggle":"tooltip",title:"Clear all changed files!"},on:{click:function(t){return e.clear()}}},[e._v("Clear all")]),n("div",{staticClass:"button",attrs:{"data-toggle":"tooltip",title:"Send all changed files to the engine!"},on:{click:function(t){return e.update()}}},[e._v("Update")]),n("div",{staticClass:"button",attrs:{"data-toggle":"tooltip",title:"Restart the preview!"},on:{click:function(t){return e.rerun()}}},[e._v("Restart")]),n("div",{staticClass:"button",attrs:{"data-toggle":"tooltip",title:"Download packed sample!"},on:{click:function(t){return e.downloadSample()}}},[e._v("Download")]),n("label",{staticClass:"hide button",attrs:{for:"hideAce"}})]),n("ul",{staticClass:"nav nav-tabs"},e._l(e.openedFiles,(function(t,i){return n("li",{key:i,staticClass:"nav-item"},[n("div",{staticClass:"nav-link",class:t==e.currentFile.name?"active":"",on:{click:function(n){return e.openFile(t)}}},[e._v(" "+e._s(t)+" "),n("span",{staticClass:"fa fa-window-close",on:{click:function(n){return e.closeFile(t)}}})])])})),0),n("div",{attrs:{id:"code-container"}},[n("div",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","s"],expression:"['ctrl', 's']"}],on:{shortkey:function(t){return e.saveCurrentFile()}}}),n("div",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["meta","s"],expression:"['meta', 's']"}],on:{shortkey:function(t){return e.saveCurrentFile()}}}),n("editor",{attrs:{options:e.editorOptions,lang:e.language,theme:"twilight",width:"100%",height:"100%"},on:{init:e.editorInit},model:{value:e.currentFile.content,callback:function(t){e.$set(e.currentFile,"content",t)},expression:"currentFile.content"}})],1)])},p=[],m=(n("caad"),n("c975"),n("a434"),n("8a79"),n("2532"),{name:"CodeEditor",components:{editor:n("7c9e")},data:function(){return{options:{theme:"vs-dark"},editor:!1,openedFiles:[],language:"c_cpp",currentFile:{name:"",content:""},contents:{}}},computed:{editorOptions:function(){return{maxLines:23}}},methods:{downloadSample:function(){this.$bus.$emit("download-sample")},clear:function(){localStorage.clear(),this.$bus.$emit("refresh"),this.$bus.$emit("rerun-preview"),this.$bus.$emit("loading",!0)},update:function(){this.$bus.$emit("update-preview")},rerun:function(){this.$bus.$emit("rerun-preview")},editorInit:function(){n("2099"),n("85d4"),n("2b41"),n("0696"),n("818b"),n("79fb"),n("4f63"),n("b039"),n("058d")},onChange:function(e){console.log(e)},openFile:function(e){this.openedFiles.includes(e)||this.openedFiles.push(e),this.onChanged(),this.currentFile.name=e,this.currentFile.content=this.getFileContent(e),e.endsWith(".xml")?this.language="xml":e.endsWith(".json")?this.language="json":e.endsWith(".lua")?this.language="lua":this.language="c_cpp"},closeFile:function(e){var t=this;this.onChanged();var n=this.openedFiles.indexOf(e);if(n>=0&&(this.openedFiles.splice(n,1),this.currentFile.name===e)){if(this.currentFile.name=!1,this.currentFile.content="",this.contents[e]=!1,this.openedFiles.length>0){var i=n-1;i<0&&(i=0),this.openFile(this.openedFiles[i])}else fetch("/tutorial.txt").then((function(e){e.text().then((function(e){t.currentFile.content=e}))}));console.log("this.openedFiles",this.openedFiles)}},getFileContent:function(e){if(this.contents[this.currentFile.name])return this.contents[this.currentFile.name];var t=localStorage.getItem(e);if(!t)try{t=document.getElementById("frame").contentWindow.Module.GetResource(e)}catch(n){console.log("e",n)}return t},saveCurrentFile:function(){this.currentFile.name&&(console.log("Saving file",this.currentFile.name),localStorage.setItem(this.currentFile.name,this.currentFile.content),this.$store.commit("toast/NEW",{message:"File "+this.currentFile.name+" saved",duration:2e3,type:"success"}),this.onChanged(),this.$bus.$emit("save-file",this.currentFile.name))},onChanged:function(){this.currentFile.name&&(this.contents[this.currentFile.name]=this.currentFile.content)}},mounted:function(){var e=this;fetch("/tutorial.txt").then((function(t){t.text().then((function(t){e.currentFile.content=t}))})),this.$bus.$on("refresh",(function(){e.currentFile.name="",e.currentFile.content="",e.openedFiles=[],e.contents={},fetch("/tutorial.txt").then((function(t){t.text().then((function(t){e.currentFile.content=t}))}))})),this.$bus.$on("edit-file",(function(t){e.currentFile.name!==t&&e.openFile(t)})),this.$bus.$on("delete-file",(function(t){e.closeFile(t)}))}}),v=m,g=(n("7a1d"),Object(c["a"])(v,f,p,!1,null,"73e69c0c",null)),N=g.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.shouldRun?n("iframe",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"frame",src:"/player.html"}}):e._e()])},b=[],w={name:"Preview",data:function(){return{shouldRun:!0}},methods:{exit:function(){this.shouldRun=!1},getFileContent:function(e){return localStorage.getItem(e)||""}},mounted:function(){var e=this;this.$bus.$on("rerun-preview",(function(){e.shouldRun=!1,setTimeout((function(){e.shouldRun=!0}),500)})),this.$bus.$on("save-file",(function(e){document.getElementById("frame").contentWindow.Module.UploadSingleFile(e)})),this.$bus.$on("update-preview",(function(){var e=[],t=localStorage.getItem("files");if(t)try{e=JSON.parse(t)}catch(n){}e.forEach((function(e){try{var t=document.getElementById("frame").contentWindow.Module.UploadSingleFile(e);console.log("result",t)}catch(n){console.error("File upload error",n)}}))}))}},x=w,E=(n("8c0d"),Object(c["a"])(x,y,b,!1,null,"51befa28",null)),S=E.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list"},[e.adding?n("div",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["esc"],expression:"['esc']"}],on:{shortkey:function(t){e.adding=!1}}}):e._e(),n("div",{staticClass:"add-file"},[e.adding?n("div",{staticClass:"preview"},[e._v(" Path: "+e._s(e.pendingNode.fullname)+"/"+e._s(e.filename)+" ")]):e._e(),e.adding?n("input",{directives:[{name:"model",rawName:"v-model",value:e.filename,expression:"filename"}],ref:"filename",staticClass:"filename",attrs:{placeholder:"scriptname.as"},domProps:{value:e.filename},on:{input:function(t){t.target.composing||(e.filename=t.target.value)}}}):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.adding,expression:"adding"}],staticClass:"button",on:{click:e.addNewFile}},[e._v(" Add ")])]),n("Tree",{ref:"my-tree-ref",attrs:{id:"my-tree-id","custom-options":e.myCustomOptions,"custom-styles":e.myCustomStyles,nodes:e.engineFiles}})],1)},F=[],C=(n("b64b"),n("ac1f"),n("1276"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-md-12 p-0",attrs:{id:e.id}},[e.force?n("ul",{style:e.styles.tree},[e._l(e.nodes,(function(t){return[n("tree-row",{key:t.id,ref:"tree-row-"+t.id,refInFor:!0,attrs:{"custom-options":e.customOptions,"custom-styles":e.customStyles,depth:1,node:t,"parent-node":t},on:{emitNodeChecked:e.onNodeChecked,emitNodeExpanded:e.onNodeExpanded,emitNodeSelected:e.onNodeSelected}})]}))],2):e._e()])}),_=[],O=(n("a4d3"),n("e01a"),n("d28b"),n("99af"),n("4de4"),n("d81d"),n("13d5"),n("07ac"),n("3ca3"),n("ddb0"),n("53ca")),$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"node",style:e.styles.row,attrs:{"data-id":e.node.id}},[n("div",{staticClass:"row_data",style:e.styles.row.child,on:{click:function(t){return e.toggleEvent("selected",e.node,"node",t)}}},[n("span",{on:{click:function(t){t.stopPropagation(),1==e.options.events.expanded.state&&void 0!=e.node.nodes&&e.node.nodes.length>0&&e.toggleEvent("expanded",e.node)}}},[e._l(e.depth,(function(e,t){return n("span",{key:t,staticClass:"tree-indent"})})),1==e.options.events.expanded.state&&void 0!=e.node.nodes&&e.node.nodes.length>0?n("i",{class:[{expanded:1==e.expanded},e.styles.expanded.class]}):1==e.options.events.expanded.state&&void 0==e.node.nodes?n("span",{staticClass:"small-tree-indent"}):e._e()],2),1==e.options.events.selected.state?n("i",{class:e.expanded?e.node.icon_expanded:e.node.icon,style:e.selected?e.node.style_selected:e.node.style,on:{click:function(t){return t.stopPropagation(),e.toggleEvent("selected",e.node)}}}):e._e(),1==e.options.events.checked.state?n("input",{attrs:{type:"checkbox",name:"item[]","data-id":e.node.id},domProps:{checked:e.checked},on:{click:function(t){return t.stopPropagation(),e.toggleEvent("checked",e.node)}}}):e._e(),n("span",{staticClass:"capitalize",class:{selected:e.selected},style:e.selected?e.styles.text.active.style:e.styles.text.style,attrs:{"data-toggle":"tooltip","data-placement":"top",title:e.node.definition},on:{click:function(t){t.stopPropagation(),e.options.events.editableName.state&&e.toggleEvent("editableName",e.node)}}},[e._v(" "+e._s(e.node.text)+" ")]),1==e.options.addNode.state?n("span",{staticClass:"icon_parent",attrs:{"data-toggle":"tooltip",title:"Create new child node (file/folder) for this node"},on:{click:function(t){return t.stopPropagation(),e.options.addNode.fn(e.node)}}},[n("i",{class:[{"icon-hover":e.options.addNode.appearOnHover},e.styles.addNode.class],style:e.styles.addNode.style})]):e._e(),1==e.options.editNode.state?n("span",{staticClass:"icon_parent",on:{click:function(t){return t.stopPropagation(),e.options.editNode.fn(e.node)}}},[n("i",{class:[{"icon-hover":e.options.editNode.appearOnHover},e.styles.editNode.class],style:e.styles.editNode.style})]):e._e(),1==e.options.deleteNode.state?n("span",{staticClass:"icon_parent",on:{click:function(t){return t.stopPropagation(),e.options.deleteNode.fn(e.node)}}},[n("i",{class:[{"icon-hover":e.options.deleteNode.appearOnHover},e.styles.deleteNode.class],style:e.styles.deleteNode.style})]):e._e(),1==e.options.showTags&&e.node.tags?n("span",[void 0!=e.node.tags[0]&&null!=e.node.tags[0]&&e.node.tags[0]?n("span",{staticClass:"badge"},[e._v(" "+e._s(e.node.tags[0])+" ")]):e._e()]):e._e()]),e.expanded?n("ul",[e._l(e.node.nodes,(function(t){return[n("tree-row",{key:t.id,ref:"tree-row-"+t.id,refInFor:!0,attrs:{"custom-options":e.customOptions,"custom-styles":e.customStyles,depth:e.depth+1,node:t,"parent-node":e.node},on:{emitNodeChecked:e.emitNodeChecked,emitNodeExpanded:e.emitNodeExpanded,emitNodeSelected:e.emitNodeSelected}})]}))],2):e._e()])},T=[],I=(n("7db0"),n("a9e3"),{name:"tree-row",props:{node:{type:Object,required:!0},depth:Number,customOptions:Object,customStyles:Object,parentNode:Object},data:function(){return{styles:{row:{width:"500px",cursor:"pointer",child:{height:"35px"}},expanded:{class:"expanded_icon"},addNode:{class:"add_icon",style:{color:"#007AD5"}},editNode:{class:"edit_icon",style:{color:"#007AD5"}},deleteNode:{class:"delete_icon",style:{color:"#EE5F5B"}},selectIcon:{class:"folder_icon",style:{color:"#007AD5"},active:{class:"folder_icon_active",style:{color:"#2ECC71"}}},text:{style:{},active:{style:{"font-weight":"bold",color:"#2ECC71"}}}},options:{events:{expanded:{state:!0,fn:this.toggleExpanded},selected:{state:!1,fn:this.toggleSelected},checked:{state:!1,fn:this.toggleChecked},editableName:{state:!1,fn:null,calledEvent:null}},addNode:{state:!1,fn:null,appearOnHover:!1},editNode:{state:!1,fn:null,appearOnHover:!1},deleteNode:{state:!1,fn:null,appearOnHover:!1},showTags:!1},checked:!1,expanded:!1,selected:!1}},watch:{checked:function(){this.node.state.checked=this.checked},expanded:function(){this.node.state.expanded=this.expanded},selected:function(){this.node.state.selected=this.selected}},mounted:function(){this.copyOptions(this.customOptions,this.options),this.copyOptions(this.customStyles,this.styles),this.node.state?(this.checked=this.node.state.checked,this.expanded=this.node.state.expanded,this.selected=this.node.state.selected):this.node.state={checked:!1,expanded:!1,selected:!1}},methods:{toggleEvent:function(e,t){if("editableName"===e&&this.options.events["editableName"].calledEvent)this.toggleEvent(this.options.events["editableName"].calledEvent,t);else if(!0===this.options.events[e].state){var n=this.options.events[e].fn;n(t,this)}},toggleExpanded:function(e,t){var n=this;this.expanded=!this.expanded,this.node.state.expanded=this.expanded,this.$nextTick((function(){n.$emit("emitNodeExpanded",e,n.expanded)}))},toggleSelected:function(e,t){this.selected=!this.selected,this.node.state.selected=this.selected,this.$emit("emitNodeSelected",e)},toggleChecked:function(e,t){var n=this;this.checked=!this.checked,this.node.state.checked=this.checked,this.$nextTick((function(){n.callNodesChecked(n.checked),n.$emit("emitNodeChecked",e)}))},emitNodeSelected:function(e){this.$emit("emitNodeSelected",e)},emitNodeExpanded:function(e,t){this.$emit("emitNodeExpanded",e,t)},emitNodeChecked:function(e){this.$emit("emitNodeChecked",e)},recCallNodes:function(e,t,n){var i=this;n.forEach((function(n){n.state||(n.state={checked:!1,expanded:!1,selected:!1}),n.state[t]=e,n.nodes&&i.recCallNodes(e,t,n.nodes)}))},callNodesChecked:function(e){this.checked=e;for(var t=0;t<this.$children.length;t++)this.$children[t].callNodesChecked(e);0===this.$children.length&&this.node.nodes&&this.node.nodes.length>0&&this.recCallNodes(e,"checked",this.node.nodes)},callNodesDeselect:function(){this.selected=!1,this.node.state.selected=this.selected;for(var e=0;e<this.$children.length;e++)this.$children[e].callNodesDeselect();0===this.$children.length&&this.node.nodes&&this.node.nodes.length>0&&this.recCallNodes(!1,"selected",this.node.nodes)},callSpecificChild:function(e,t,n){for(var i=this,o=function(o){var s=i.$children[o].$props.node.id;if(e.find((function(e){return e==s})))return i.$children[o][t](n),{v:!1}},s=0;s<this.$children.length;s++){var a=o(s);if("object"===Object(O["a"])(a))return a.v}},callNodeChecked:function(e){var t=this,n=e.arrIds,i=e.value;n[n.length-1]==this.node.id?(this.checked=i,this.callNodesChecked(this.checked)):(this.expanded=!0,this.$nextTick((function(){t.callSpecificChild(n,"callNodeChecked",e)})))},callNodeSelected:function(e){var t=this,n=e.arrIds,i=e.value;n[n.length-1]==this.node.id?this.selected=i:(this.expanded=!0,this.$nextTick((function(){t.callSpecificChild(n,"callNodeSelected",e)})))},callNodeExpanded:function(e){var t=this,n=e.arrIds,i=e.value;!1===i&&!1===this.expanded||(n[n.length-1]!=this.node.id?!0===i?(this.expanded=!0,this.$nextTick((function(){t.callSpecificChild(n,"callNodeExpanded",e)}))):this.callSpecificChild(n,"callNodeExpanded",e):this.expanded=i)},copyOptions:function(e,t){for(var n in e)t[n]&&"object"===Object(O["a"])(e[n])?this.copyOptions(e[n],t[n]):t[n]=e[n]}}}),A=I,j=(n("5df2"),Object(c["a"])(A,$,T,!1,null,"598c9c34",null)),D=j.exports,L={name:"tree",props:{customOptions:{default:function(){return{}},type:Object},customStyles:{default:function(){return{}},type:Object},id:{default:"tree",type:String},nodes:{type:Array,required:!0}},data:function(){return{styles:{tree:{height:"auto",maxHeight:"500px",overflowY:"scroll",display:"inline-block"}},options:{treeEvents:{expanded:{state:!1,fn:null},collapsed:{state:!1,fn:null},selected:{state:!1,fn:null},checked:{state:!1,fn:null}}},selectedNode:null,force:!0}},components:{"tree-row":D},mounted:function(){this.copyOptions(this.customOptions,this.options),this.copyOptions(this.customStyles,this.styles)},methods:{forceRender:function(e){var t=this;this.nodes=[],this.$nextTick((function(){t.nodes=e}))},copyOptions:function(e,t){for(var n in e)t[n]&&"object"===Object(O["a"])(e[n])?this.copyOptions(e[n],t[n]):t[n]=e[n]},recFindNodePath:function(e,t,n,i){var o=this,s=[];return t.forEach((function(t){var a=[];return e==t.id&&i>=n?(s.unshift(t.id),!1):t.nodes&&i>n&&null!=(a=o.recFindNodePath(e,t.nodes,n+1,i))&&a.length>0?(a.unshift(t.id),s=a,!1):void 0})),s},findNodePath:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9999;return this.recFindNodePath(e,this.nodes,1,t)},recFindNode:function(e,t,n,i){var o=this,s=null;return t.forEach((function(t){var a=[];return e==t.id&&i>=n?(s=t,!1):t.nodes&&i>n&&null!=(a=o.recFindNode(e,t.nodes,n+1,i))?(s=a,!1):void 0})),s},findNode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9999;return this.recFindNode(e,this.nodes,1,t)},onNodeSelected:function(e){var t=this;if(null==this.selectedNode&&!0===e.state.selected)this.selectedNode=e;else if(null!=this.selectedNode&&!1===e.state.selected)this.selectedNode=null;else if(null!=this.selectedNode&&!0===e.state.selected){var n=this.findNodePath(this.selectedNode.id,this.selectedNode.depth);this.callSpecificChild(n,"callNodeSelected",{value:!1,arrIds:n}),this.selectedNode=e,this.$nextTick((function(){if(t.selectedNode){var e=t.findNodePath(t.selectedNode.id,t.selectedNode.depth);t.callSpecificChild(e,"callNodeSelected",{value:!0,arrIds:e})}}))}var i=null;this.options.treeEvents.selected&&!0===this.options.treeEvents.selected.state&&(i=this.customOptions.treeEvents.selected.fn);var o=null!==this.selectedNode;i&&i(e.id,o)},onNodeExpanded:function(e,t){var n=null;!0===t&&this.options.treeEvents.expanded&&!0===this.options.treeEvents.expanded.state?n=this.customOptions.treeEvents.expanded.fn:this.options.treeEvents.collapsed&&!0===this.options.treeEvents.collapsed.state&&(n=this.customOptions.treeEvents.collapsed.fn),n&&n(e.id,t)},onNodeChecked:function(e){var t=null;this.options.treeEvents.checked&&!0===this.options.treeEvents.checked.state&&(t=this.customOptions.treeEvents.checked.fn);var n=e.state.checked;t&&t(e.id,n)},callSpecificChild:function(e,t,n){var i=!0,o=!1,s=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var d=a.value,r=this.$refs["tree-row-"+d];r&&r[0][t](n)}}catch(c){o=!0,s=c}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}},doCheckNode:function(e,t,n){var i=this.findNodePath(e,t);i&&this.callSpecificChild(i,"callNodeChecked",{value:n,arrIds:i})},checkNode:function(e,t){this.doCheckNode(e,t,!0)},uncheckNode:function(e,t){this.doCheckNode(e,t,!1)},getSelectedNode:function(){return this.selectedNode},getCheckedNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getNodesData(e,{checked:!0},t)},getExpandedNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getNodesData(e,{expanded:!0},t)},checkAllNodes:function(){this.callSpecificChild(this.nodes.map((function(e){return e.id})),"callNodesChecked",!0)},uncheckAllNodes:function(){this.callSpecificChild(this.nodes.map((function(e){return e.id})),"callNodesChecked",!1)},recExpandAllNodes:function(e){var t=!1,n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value;l.nodes&&(t=!0,!1===this.recExpandAllNodes(l.nodes)&&this.expandNode(l.id))}}catch(d){i=!0,o=d}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return t},expandAllNodes:function(){this.recExpandAllNodes(this.nodes)},recCollapseAllNodes:function(e){var t=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var a=o.value;this.findNode(a).state.expanded=!1}}catch(l){n=!0,i=l}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}},collapseAllNodes:function(){this.recCollapseAllNodes(this.getExpandedNodes("id"));var e=!0,t=!1,n=void 0;try{for(var i,o=this.nodes[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;this.collapseNode(s.id)}}catch(a){t=!0,n=a}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}},deselectAllNodes:function(){this.selectedNode=null,this.callSpecificChild(this.nodes.map((function(e){return e.id})),"callNodesDeselect")},expandNode:function(e,t){var n=this.findNodePath(e,t);this.callSpecificChild(n,"callNodeExpanded",{value:!0,arrIds:n})},selectNode:function(e,t){var n=this.findNode(e,t),i=this;if(this.selectedNode){var o=this.findNodePath(this.selectedNode.id,this.selectedNode.depth);this.callSpecificChild(o,"callNodeSelected",{value:!1,arrIds:o})}this.selectedNode=n,this.selectedNode&&this.$nextTick((function(){var e=i.findNodePath(i.selectedNode.id,i.selectedNode.depth);i.callSpecificChild(e,"callNodeSelected",{value:!0,arrIds:e})}))},collapseNode:function(e,t){var n=this.findNodePath(e,t);this.callSpecificChild(n,"callNodeExpanded",{value:!1,arrIds:n})},recGetVisibleNodes:function(e,t,n){t.node&&e.push(n?t.node:t.node.id);for(var i=0,o=Object.values(t.$refs);i<o.length;i++){var s=o[i];s&&s[0]&&this.recGetVisibleNodes(e,s[0],n)}},getVisibleNodes:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return this.recGetVisibleNodes(t,this,e),t},recGetNodesData:function(e,t,n){var i=this,o=[];return void 0===n?o:(n.forEach((function(n){n.state&&Object.keys(n.state).filter((function(e){return t[e]===n.state[e]})).length===Object.keys(t).length&&(Array.isArray(e)?o.push(Object.keys(n).filter((function(t){return e.includes(t)})).reduce((function(e,t){return e[t]=n[t],e}),{})):o.push(n[e])),o=o.concat(i.recGetNodesData(e,t,n.nodes))})),o)},recGetNodesDataWithFormat:function(e,t,n){var i=this,o={};return void 0===n||0===n.length?o:(n.forEach((function(n){n.state&&Object.keys(n.state).filter((function(e){return t[e]===n.state[e]})).length===Object.keys(t).length?o[n.id]=i.recGetNodesDataWithFormat(e,t,n.nodes):Object.assign(o,i.recGetNodesDataWithFormat(e,t,n.nodes))})),o)},getNodesData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null;return i=!1===n?this.recGetNodesData(e,t,this.nodes):this.recGetNodesDataWithFormat(e,t,this.nodes),i}}},R=L,P=Object(c["a"])(R,C,_,!1,null,null,null),W=P.exports,M={name:"ProjectStructure",components:{Tree:W},data:function(){return{files:[],adding:!1,filename:"",engineFiles:[],projectStructureTimer:!1,lastFileId:0,pendingNode:!1}},computed:{myCustomStyles:function(){return{tree:{height:"auto",maxHeight:"300px",overflowY:"visible",display:"inline-block"},row:{width:"500px",cursor:"pointer",child:{height:"20px"}},text:{style:{},active:{style:{"font-weight":"bold",color:"#2ECC71"}}},addNode:{class:"fa fa-plus",style:{color:"#009900"}},selectIcon:{class:"fa fa-folder",style:{color:"#007AD5"},active:{class:"fa fa-folder-open",style:{color:"#2ECC71"}}},expanded:{class:"fa fa-angle-right expanded_icon"}}},myCustomOptions:function(){return{treeEvents:{expanded:{state:!1},collapsed:{state:!1},selected:{state:!1}},events:{expanded:{state:!0},selected:{fn:this.selectNode,state:!0},checked:{state:!1},editableName:{state:!0,calledEvent:"expanded"}},addNode:{state:!0,fn:this.addNode,appearOnHover:!1},editNode:{state:!1,fn:null,appearOnHover:!0},deleteNode:{state:!0,fn:this.deleteNode,appearOnHover:!0},showTags:!0}}},methods:{getFullName:function(e){var t=e,n=e.text;while(t.parent)n=t.parent.text+"/"+n,t=t.parent;return n},selectNode:function(e){this.$bus.$emit("edit-file",e.fullname)},addNode:function(e){var t=this;this.adding=!0,this.pendingNode=e,this.$nextTick((function(){return t.$refs.filename.focus()})),console.log("this.$refs.filename.$el.focus()",this.$refs)},deleteNode:function(e){if(console.log("deleteNode",e),null!==localStorage.getItem(e.fullname)){localStorage.removeItem(e.fullname);var t=this.files.indexOf(e.fullname);t>=0&&(this.files.splice(t,1),this.saveToStorage(),this.updateTree())}},loadFromStorage:function(){var e=localStorage.getItem("files")||"[]";if(e)try{this.files=JSON.parse(e)}catch(n){console.error("e")}this.files.sort();var t=localStorage.getItem("engine_files")||"[]";if(t)try{t=JSON.parse(t)}catch(n){console.error("e")}this.files.forEach((function(e){t.push(e)})),t.sort(),this.engineFiles=this.processFiles(t),this.engineFiles.sort((function(e,t){return e.nodes.length&&!t.nodes.length?-1:!e.nodes.length&&t.nodes.length?1:e.text<t.text?-1:e.text>t.text?1:0})),this.updateTree()},saveToStorage:function(){this.files.sort((function(e,t){var n=e.split("."),i=t.split("."),o=n[n.length-1],s=i[i.length-1];return"as"===o?1:"as"===s?-1:0})),localStorage.setItem("files",JSON.stringify(this.files))},addNewFile:function(){var e=this.getFullName(this.pendingNode)+"/"+this.filename;this.pendingNode.nodes.push({text:this.filename,id:this.lastFileId++,nodes:[],parent:this.pendingNode,icon:"fa fa-file",icon_expanded:"fa fa-file",style:"color: #990000",style_selected:"color: #990000",deletable:!0,fullname:e}),this.files.includes(e)?this.$store.commit("toast/NEW",{message:"File already exists",duration:2e3,type:"warning"}):this.filename?(this.files.push(e),this.saveToStorage(),localStorage.setItem(e,""),this.adding=!1,this.$bus.$emit("edit-file",e)):this.$store.commit("toast/NEW",{message:"No name specified",duration:2e3,type:"warning"}),this.filename="",this.files.sort(),this.updateTree()},changeFile:function(e){console.log("Changing file",e),this.$bus.$emit("edit-file",e)},updateTree:function(){var e=this;this.engineFiles.forEach((function(t){e.processSingleNode(t)}))},processSingleNode:function(e){var t=this;if(e.style="color: #ee9944",e.style_selected="color: #00000",e.nodes.forEach((function(e){t.processSingleNode(e)})),null!==localStorage.getItem(e.fullname)){e.style="color: #990000",e.style_selected="color: #990000";var n=e.parent;while(n)n.style=e.style,n.style_selected=e.style_selected,n=n.parent}},deleteFile:function(e){var t=this.files[e];this.files.splice(e,1),localStorage.removeItem(t),this.saveToStorage(),this.$bus.$emit("delete-file",t)},convertItem:function(e,t,n){var i={text:e,id:this.lastFileId++,nodes:[],deletable:null!==localStorage.getItem(e),parent:n,icon:"fa fa-folder",icon_expanded:"fa fa-folder-open",style:"color: #ee9944",style_selected:"color: #00000"},o=this.getFullName(i);i.fullname=o;var s=[];if(Object.keys(t).length>0)for(var a in t)s.push(this.convertItem(a,t[a],i));return i.nodes=s,0===i.nodes.length&&(i.icon="fa fa-file"),i.deletable&&(i.style="color: #990000"),i},processFiles:function(e){var t={};e.forEach((function(e){var n=e.split("/"),i=n[0];t[i]||(t[i]={});for(var o=t[i],s=1;s<n.length;s++)o[n[s]]||(o[n[s]]={}),o=o[n[s]]}));var n=[];for(var i in t)n.push(this.convertItem(i,t[i]));return n},addNewCustomFile:function(e){this.files.includes(e)||(this.files.push(e),this.saveToStorage())}},mounted:function(){var e=this;this.loadFromStorage(),this.$bus.$on("refresh",(function(){e.loadFromStorage()})),this.$bus.$on("list-resource",(function(t){clearTimeout(e.projectStructureTimer),e.projectStructureTimer=setTimeout((function(){e.loadFromStorage(),clearTimeout(e.projectStructureTimer)}),1e3)})),this.$bus.$on("save-file",(function(t){e.addNewCustomFile(t),e.updateTree()}))}},z=M,U=(n("d14f"),Object(c["a"])(z,k,F,!1,null,"438c0973",null)),H=U.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{ref:"messages",staticClass:"row messages"},e._l(e.messages,(function(t,i){return n("div",{key:i,staticClass:"message"},[e._v(" "+e._s(t)+" ")])})),0)])},q=[],B={name:"Messages",components:{},data:function(){return{messages:[]}},mounted:function(){var e=this;this.$bus.$on("engine-message",(function(t){e.messages.push(t),e.$nextTick((function(){}))}))}},Y=B,J=(n("ca0e"),Object(c["a"])(Y,G,q,!1,null,"20312462",null)),V=J.exports,K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition-group",{staticClass:"ui-toast-list component",attrs:{name:"slide",tag:"div"}},e._l(e.toastsList,(function(t){return n("UiToast",{key:t.id,attrs:{item:t},on:{remove:e.onRemove}})})),1)},Q=[],X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ui-toast component",class:e.classList,on:{click:e.remove}},[e._v(" "+e._s(e.item.message)+" ")])},Z=[],ee={name:"UIToast",props:{item:{type:Object}},methods:{remove:function(){this.$emit("remove",this.item.id)}},computed:{classList:function(){return{default:"default"===this.item.type,success:"success"===this.item.type,info:"info"===this.item.type,warning:"warning"===this.item.type,error:"error"===this.item.type}}},mounted:function(){var e=this;if(this.item.duration)var t=setTimeout((function(){clearTimeout(t),e.remove()}),this.item.duration)}},te=ee,ne=(n("c9e9"),Object(c["a"])(te,X,Z,!1,null,null,null)),ie=ne.exports,oe={name:"UiToastList",components:{UiToast:ie},watch:{$route:{handler:"clearToastList",deep:"true"}},computed:{toastsList:function(){return this.$store.state.toast.toastsList}},methods:{onRemove:function(e){this.$store.commit("toast/REMOVE",{id:e})},clearToastList:function(){this.toastsList.length&&this.$store.commit("toast/CLEAR_LIST")}}},se=oe,ae=(n("e85c"),Object(c["a"])(se,K,Q,!1,null,"9d0bffc4",null)),le=ae.exports,de={name:"AppLayout",components:{UiToastList:le,Messages:V,ProjectStructure:H,Preview:S,CodeEditor:N,Loader:h},data:function(){return{loading:!1}},mounted:function(){var e=this;this.$bus.$on("loading",(function(t){e.loading=t})),setTimeout((function(){e.loading=!1}),5e3)}},re=de,ce=Object(c["a"])(re,o,s,!1,null,null,null),ue=ce.exports,he=n("8c4f");function fe(e,t,n){n()}var pe=[];i["a"].use(he["a"]);var me=new he["a"]({linkActiveClass:"is-active",mode:"history",routes:pe});me.beforeEach(fe);var ve=me,ge=n("2f62"),Ne={namespaced:!0,state:{windowWidth:0,widthExtraSmall:320,widthSmall:640,widthTablet:1024},mutations:{SET_WINDOW_WIDTH:function(e,t){e.windowWidth=t}},getters:{isExtraSmall:function(e){return e.windowWidth<=e.widthExtraSmall},isSmall:function(e){return e.windowWidth<=e.widthSmall},isTablet:function(e){return e.windowWidth<=e.widthTablet},isDesktop:function(e){return e.windowWidth>e.widthTablet}}},ye=n("5530"),be={namespaced:!0,state:{toastsList:[]},mutations:{NEW:function(e,t){var n={id:(new Date).getTime(),message:"string"===typeof t?t:t.message,type:t.type||"default",duration:t.duration||5e3};"error"===t.type&&(n.duration=0,console.error(t.message)),e.toastsList.push(Object(ye["a"])({},n))},REMOVE:function(e,t){e.toastsList=e.toastsList.filter((function(e){var n=e.id;return n!==t.id}))},CLEAR_LIST:function(e){e.toastsList=[]}}},we={dom:Ne,toast:be};i["a"].use(ge["a"]);var xe=new ge["a"].Store({modules:we,strict:!1}),Ee={methods:{$jumpTo:function(e){var t=document.querySelectorAll(e)[0];if(!t)throw new Error("Element not supplied.");t.scrollIntoView({behavior:"smooth"})}}},Se={FORMAT_DATE:"MM/DD/YYYY",FORMAT_TIME:"hh:mm:ss",FORMAT_DATETIME:"MM/DD/YYYY hh:mm:ss"},ke={computed:{$FORMAT_DATETIME:function(){return{DATE:Se.FORMAT_DATE,TIME:Se.FORMAT_TIME,DATETIME:Se.FORMAT_DATETIME}}}};i["a"].mixin(Ee),i["a"].mixin(ke);var Fe=new i["a"],Ce={install:function(e){e.prototype.$bus=Fe}},_e=n("3717"),Oe=n.n(_e),$e=(n("fb6a"),$e||"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){if("undefined"===typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=e.URL||e.webkitURL||e,o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),s=!e.externalHost&&"download"in o,a=e.webkitRequestFileSystem,l=e.requestFileSystem||a||e.mozRequestFileSystem,d=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},r="application/octet-stream",c=0,u=[],h=function(){var e=u.length;while(e--){var t=u[e];"string"===typeof t?i.revokeObjectURL(t):t.remove()}u.length=0},f=function(e,t,n){t=[].concat(t);var i=t.length;while(i--){var o=e["on"+t[i]];if("function"===typeof o)try{o.call(e,n||e)}catch(s){d(s)}}},p=function(i,d){var h,p,m,v=this,g=i.type,N=!1,y=function(){var e=n().createObjectURL(i);return u.push(e),e},b=function(){f(v,"writestart progress write writeend".split(" "))},w=function(){!N&&h||(h=y(i)),p?p.location.href=h:window.open(h,"_blank"),v.readyState=v.DONE,b()},x=function(e){return function(){if(v.readyState!==v.DONE)return e.apply(this,arguments)}},E={create:!0,exclusive:!1};if(v.readyState=v.INIT,d||(d="download"),s){h=y(i),t=e.document,o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o.href=h,o.download=d;var S=t.createEvent("MouseEvents");return S.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(S),v.readyState=v.DONE,void b()}e.chrome&&g&&g!==r&&(m=i.slice||i.webkitSlice,i=m.call(i,0,i.size,r),N=!0),a&&"download"!==d&&(d+=".download"),(g===r||a)&&(p=e),l?(c+=i.size,l(e.TEMPORARY,c,x((function(e){e.root.getDirectory("saved",E,x((function(e){var t=function(){e.getFile(d,E,x((function(e){e.createWriter(x((function(t){t.onwriteend=function(t){p.location.href=e.toURL(),u.push(e),v.readyState=v.DONE,f(v,"writeend",t)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&w()},"writestart progress write abort".split(" ").forEach((function(e){t["on"+e]=v["on"+e]})),t.write(i),v.abort=function(){t.abort(),v.readyState=v.DONE},v.readyState=v.WRITING})),w)})),w)};e.getFile(d,{create:!1},x((function(e){e.remove(),t()})),x((function(e){e.code===e.NOT_FOUND_ERR?t():w()})))})),w)})),w)):w()},m=p.prototype,v=function(e,t){return new p(e,t)};return m.abort=function(){var e=this;e.readyState=e.DONE,f(e,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,e.addEventListener("unload",h,!1),v.unload=function(){h(),e.removeEventListener("unload",h,!1)},v}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||(void 0).content)),Te={install:function(e){e.prototype.$FileSaver=$e}};i["a"].use(Ce),i["a"].use(Oe.a),i["a"].use(Te);n("5bac"),n("5903");var Ie=n("c4e3"),Ae=n.n(Ie);i["a"].config.productionTip=!1,new i["a"]({name:"Root",router:ve,store:xe,data:function(){return{filesLoaded:0,requiredFiles:0,zip:!1}},methods:{onRemoteEvent:function(e){e.data.name&&this.$bus.$emit(e.data.name,e.data.payload)},onFileLoaded:function(){var e=this;this.filesLoaded++,this.filesLoaded===this.requiredFiles&&this.zip&&this.zip.generateAsync({type:"blob"}).then((function(t){e.$FileSaver(t,"project.zip"),e.$bus.$emit("loading",!1)}))},fetchAndAddTextFile:function(e,t){var n=this;this.requiredFiles++,fetch("/"+e).then((function(i){i.text().then((function(i){t?n.zip.file(t,i):n.zip.file(e,i),n.onFileLoaded()}))}))},fetchAndAddBinaryFile:function(e){var t=this;this.requiredFiles++,fetch("/"+e).then((function(n){n.blob().then((function(n){t.zip.file(e,n),t.onFileLoaded()}))}))},addCustomFiles:function(){var e=this,t=localStorage.getItem("files")||"[]";if(t)try{var n=JSON.parse(t);this.requiredFiles+=n.length,this.zip.file("files.js",JSON.stringify(n)),n.forEach((function(t){var n=localStorage.getItem(t)||"";e.zip.file("data/"+t,n)})),this.filesLoaded+=n.length,this.onFileLoaded()}catch(i){console.error("e",i)}}},mounted:function(){var e=this;xe.commit("dom/SET_WINDOW_WIDTH",window.innerWidth),window.addEventListener("resize",(function(){return xe.commit("dom/SET_WINDOW_WIDTH",window.innerWidth)})),window.addEventListener?window.addEventListener("message",this.onRemoteEvent,!1):window.attachEvent&&window.attachEvent("onmessage",this.onRemoteEvent,!1),this.$bus.$on("download-sample",(function(){e.$bus.$emit("loading",!0),e.filesLoaded=0,e.requiredFiles=0,e.zip=new Ae.a,e.addCustomFiles(),e.fetchAndAddTextFile("player.html","index.html"),e.fetchAndAddBinaryFile("55_TankPrototype.data"),e.fetchAndAddBinaryFile("55_TankPrototype.wasm"),e.fetchAndAddTextFile("55_TankPrototype.wasm.map"),e.fetchAndAddTextFile("55_TankPrototype.js")}))},beforeDestroy:function(){window.removeEventListener("resize",(function(){return xe.commit("dom/SET_WINDOW_WIDTH",window.innerWidth)}))},render:function(e){return e(ue)}}).$mount("#app")},5903:function(e,t,n){},"5bac":function(e,t){},"5df2":function(e,t,n){"use strict";var i=n("4c44"),o=n.n(i);o.a},"7a1d":function(e,t,n){"use strict";var i=n("1356"),o=n.n(i);o.a},"8c0d":function(e,t,n){"use strict";var i=n("b0e2"),o=n.n(i);o.a},"9c41":function(e,t,n){},b0e2:function(e,t,n){},b7eb:function(e,t,n){"use strict";var i=n("48f9"),o=n.n(i);o.a},c9e9:function(e,t,n){"use strict";var i=n("efad"),o=n.n(i);o.a},ca0e:function(e,t,n){"use strict";var i=n("e557"),o=n.n(i);o.a},d14f:function(e,t,n){"use strict";var i=n("9c41"),o=n.n(i);o.a},e557:function(e,t,n){},e85c:function(e,t,n){"use strict";var i=n("40f1"),o=n.n(i);o.a},efad:function(e,t,n){}});
//# sourceMappingURL=app.ee58913e.js.map